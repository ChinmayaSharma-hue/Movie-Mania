{"ast":null,"code":"import _slicedToArray from\"E:/Web Dev/project/trydjango/src/movie_db_site/movie-recommendation-site/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Signup=function Signup(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),password1=_useState4[0],setPassword1=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),password2=_useState6[0],setPassword2=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),errors=_useState8[0],setErrors=_useState8[1];var _useState9=useState(true),_useState10=_slicedToArray(_useState9,2),loading=_useState10[0],setLoading=_useState10[1];useEffect(function(){if(localStorage.getItem('token')!==null){window.location.replace('http://localhost:8000/home');}else{setLoading(false);}},[]);var onSubmit=function onSubmit(e){e.preventDefault();var user={email:email,password1:password1,password2:password2};fetch('http://127.0.0.1:8000/api/v1/users/auth/register/',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(user)}).then(function(res){return res.json();}).then(function(data){if(data.key){localStorage.clear();localStorage.setItem('token',data.key);window.location.replace('http://localhost:8000/home');}else{setEmail('');setPassword1('');setPassword2('');localStorage.clear();setErrors(true);}});};return/*#__PURE__*/_jsxs(\"div\",{children:[loading===false&&/*#__PURE__*/_jsx(\"h1\",{children:\"Signup\"}),errors===true&&/*#__PURE__*/_jsx(\"h2\",{children:\"Cannot signup with provided credentials\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:onSubmit,children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",children:\"Email address:\"}),\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{name:\"email\",type:\"email\",value:email,onChange:function onChange(e){return setEmail(e.target.value);},required:true}),' ',/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password1\",children:\"Password:\"}),\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{name:\"password1\",type:\"password\",value:password1,onChange:function onChange(e){return setPassword1(e.target.value);},required:true}),' ',/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password2\",children:\"Confirm password:\"}),\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{name:\"password2\",type:\"password\",value:password2,onChange:function onChange(e){return setPassword2(e.target.value);},required:true}),' ',/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"submit\",value:\"Signup\"})]})]});};export default Signup;","map":{"version":3,"names":["React","useState","useEffect","Signup","email","setEmail","password1","setPassword1","password2","setPassword2","errors","setErrors","loading","setLoading","localStorage","getItem","window","location","replace","onSubmit","e","preventDefault","user","fetch","method","headers","body","JSON","stringify","then","res","json","data","key","clear","setItem","target","value"],"sources":["E:/Web Dev/project/trydjango/src/movie_db_site/movie-recommendation-site/src/views/auth/Signup.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\n\r\nconst Signup = () => {\r\n    const [email, setEmail] = useState('');\r\n    const [password1, setPassword1] = useState('');\r\n    const [password2, setPassword2] = useState('');\r\n    const [errors, setErrors] = useState(false);\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    useEffect(() => {\r\n        if (localStorage.getItem('token') !== null) {\r\n            window.location.replace('http://localhost:8000/home');\r\n        } else {\r\n            setLoading(false);\r\n        }\r\n    }, []);\r\n\r\n    const onSubmit = e => {\r\n        e.preventDefault();\r\n\r\n        const user = {\r\n            email: email,\r\n            password1: password1,\r\n            password2: password2\r\n        };\r\n\r\n        fetch('http://127.0.0.1:8000/api/v1/users/auth/register/', {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify(user)\r\n        })\r\n            .then(res => res.json())\r\n            .then(data => {\r\n                if (data.key) {\r\n                    localStorage.clear();\r\n                    localStorage.setItem('token', data.key);\r\n                    window.location.replace('http://localhost:8000/home');\r\n                } else {\r\n                    setEmail('');\r\n                    setPassword1('');\r\n                    setPassword2('');\r\n                    localStorage.clear();\r\n                    setErrors(true);\r\n                }\r\n            });\r\n    };\r\n\r\n    return (\r\n        <div>\r\n            {loading === false && <h1>Signup</h1>}\r\n            {errors === true && <h2>Cannot signup with provided credentials</h2>}\r\n            <form onSubmit={onSubmit}>\r\n                <label htmlFor='email'>Email address:</label> <br />\r\n                <input\r\n                    name='email'\r\n                    type='email'\r\n                    value={email}\r\n                    onChange={e => setEmail(e.target.value)}\r\n                    required\r\n                />{' '}\r\n                <br />\r\n                <label htmlFor='password1'>Password:</label> <br />\r\n                <input\r\n                    name='password1'\r\n                    type='password'\r\n                    value={password1}\r\n                    onChange={e => setPassword1(e.target.value)}\r\n                    required\r\n                />{' '}\r\n                <br />\r\n                <label htmlFor='password2'>Confirm password:</label> <br />\r\n                <input\r\n                    name='password2'\r\n                    type='password'\r\n                    value={password2}\r\n                    onChange={e => setPassword2(e.target.value)}\r\n                    required\r\n                />{' '}\r\n                <br />\r\n                <input type='submit' value='Signup' />\r\n            </form>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Signup;\r\n"],"mappings":"8JAAA,MAAOA,MAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,C,wFAEA,GAAMC,OAAM,CAAG,QAATA,OAAS,EAAM,CACjB,cAA0BF,QAAQ,CAAC,EAAD,CAAlC,wCAAOG,KAAP,eAAcC,QAAd,eACA,eAAkCJ,QAAQ,CAAC,EAAD,CAA1C,yCAAOK,SAAP,eAAkBC,YAAlB,eACA,eAAkCN,QAAQ,CAAC,EAAD,CAA1C,yCAAOO,SAAP,eAAkBC,YAAlB,eACA,eAA4BR,QAAQ,CAAC,KAAD,CAApC,yCAAOS,MAAP,eAAeC,SAAf,eACA,eAA8BV,QAAQ,CAAC,IAAD,CAAtC,0CAAOW,OAAP,gBAAgBC,UAAhB,gBAEAX,SAAS,CAAC,UAAM,CACZ,GAAIY,YAAY,CAACC,OAAb,CAAqB,OAArB,IAAkC,IAAtC,CAA4C,CACxCC,MAAM,CAACC,QAAP,CAAgBC,OAAhB,CAAwB,4BAAxB,EACH,CAFD,IAEO,CACHL,UAAU,CAAC,KAAD,CAAV,CACH,CACJ,CANQ,CAMN,EANM,CAAT,CAQA,GAAMM,SAAQ,CAAG,QAAXA,SAAW,CAAAC,CAAC,CAAI,CAClBA,CAAC,CAACC,cAAF,GAEA,GAAMC,KAAI,CAAG,CACTlB,KAAK,CAAEA,KADE,CAETE,SAAS,CAAEA,SAFF,CAGTE,SAAS,CAAEA,SAHF,CAAb,CAMAe,KAAK,CAAC,mDAAD,CAAsD,CACvDC,MAAM,CAAE,MAD+C,CAEvDC,OAAO,CAAE,CACL,eAAgB,kBADX,CAF8C,CAKvDC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAeN,IAAf,CALiD,CAAtD,CAAL,CAOKO,IAPL,CAOU,SAAAC,GAAG,QAAIA,IAAG,CAACC,IAAJ,EAAJ,EAPb,EAQKF,IARL,CAQU,SAAAG,IAAI,CAAI,CACV,GAAIA,IAAI,CAACC,GAAT,CAAc,CACVnB,YAAY,CAACoB,KAAb,GACApB,YAAY,CAACqB,OAAb,CAAqB,OAArB,CAA8BH,IAAI,CAACC,GAAnC,EACAjB,MAAM,CAACC,QAAP,CAAgBC,OAAhB,CAAwB,4BAAxB,EACH,CAJD,IAIO,CACHb,QAAQ,CAAC,EAAD,CAAR,CACAE,YAAY,CAAC,EAAD,CAAZ,CACAE,YAAY,CAAC,EAAD,CAAZ,CACAK,YAAY,CAACoB,KAAb,GACAvB,SAAS,CAAC,IAAD,CAAT,CACH,CACJ,CApBL,EAqBH,CA9BD,CAgCA,mBACI,uBACKC,OAAO,GAAK,KAAZ,eAAqB,8BAD1B,CAEKF,MAAM,GAAK,IAAX,eAAmB,+DAFxB,cAGI,cAAM,QAAQ,CAAES,QAAhB,wBACI,cAAO,OAAO,CAAC,OAAf,4BADJ,kBACkD,aADlD,cAEI,cACI,IAAI,CAAC,OADT,CAEI,IAAI,CAAC,OAFT,CAGI,KAAK,CAAEf,KAHX,CAII,QAAQ,CAAE,kBAAAgB,CAAC,QAAIf,SAAQ,CAACe,CAAC,CAACgB,MAAF,CAASC,KAAV,CAAZ,EAJf,CAKI,QAAQ,KALZ,EAFJ,CAQO,GARP,cASI,aATJ,cAUI,cAAO,OAAO,CAAC,WAAf,uBAVJ,kBAUiD,aAVjD,cAWI,cACI,IAAI,CAAC,WADT,CAEI,IAAI,CAAC,UAFT,CAGI,KAAK,CAAE/B,SAHX,CAII,QAAQ,CAAE,kBAAAc,CAAC,QAAIb,aAAY,CAACa,CAAC,CAACgB,MAAF,CAASC,KAAV,CAAhB,EAJf,CAKI,QAAQ,KALZ,EAXJ,CAiBO,GAjBP,cAkBI,aAlBJ,cAmBI,cAAO,OAAO,CAAC,WAAf,+BAnBJ,kBAmByD,aAnBzD,cAoBI,cACI,IAAI,CAAC,WADT,CAEI,IAAI,CAAC,UAFT,CAGI,KAAK,CAAE7B,SAHX,CAII,QAAQ,CAAE,kBAAAY,CAAC,QAAIX,aAAY,CAACW,CAAC,CAACgB,MAAF,CAASC,KAAV,CAAhB,EAJf,CAKI,QAAQ,KALZ,EApBJ,CA0BO,GA1BP,cA2BI,aA3BJ,cA4BI,cAAO,IAAI,CAAC,QAAZ,CAAqB,KAAK,CAAC,QAA3B,EA5BJ,GAHJ,GADJ,CAoCH,CAnFD,CAqFA,cAAelC,OAAf"},"metadata":{},"sourceType":"module"}
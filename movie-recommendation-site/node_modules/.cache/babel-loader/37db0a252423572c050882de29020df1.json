{"ast":null,"code":"import _slicedToArray from\"E:/Web Dev/project/trydjango/src/movie_db_site/movie-recommendation-site/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect,Fragment}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Logout=function Logout(){var _useState=useState(true),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];useEffect(function(){if(localStorage.getItem('token')==null){window.location.replace('http://localhost:8000/login');}else{setLoading(false);}},[]);var handleLogout=function handleLogout(e){e.preventDefault();fetch('http://127.0.0.1:8000/api/v1/users/auth/logout/',{method:'POST',headers:{'Content-Type':'application/json',Authorization:\"Token \".concat(localStorage.getItem('token'))}}).then(function(res){return res.json();}).then(function(data){console.log(data);localStorage.clear();window.location.replace('http://localhost:8000/login');});};return/*#__PURE__*/_jsx(\"div\",{children:loading===false&&/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Are you sure you want to logout?\"}),/*#__PURE__*/_jsx(\"input\",{type:\"button\",value:\"Logout\",onClick:handleLogout})]})});};export default Logout;","map":{"version":3,"names":["React","useState","useEffect","Fragment","Logout","loading","setLoading","localStorage","getItem","window","location","replace","handleLogout","e","preventDefault","fetch","method","headers","Authorization","then","res","json","data","console","log","clear"],"sources":["E:/Web Dev/project/trydjango/src/movie_db_site/movie-recommendation-site/src/views/auth/Logout.js"],"sourcesContent":["import React, { useState, useEffect, Fragment } from 'react';\r\n\r\nconst Logout = () => {\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    useEffect(() => {\r\n        if (localStorage.getItem('token') == null) {\r\n            window.location.replace('http://localhost:8000/login');\r\n        } else {\r\n            setLoading(false);\r\n        }\r\n    }, []);\r\n\r\n    const handleLogout = e => {\r\n        e.preventDefault();\r\n\r\n        fetch('http://127.0.0.1:8000/api/v1/users/auth/logout/', {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                Authorization: `Token ${localStorage.getItem('token')}`\r\n            }\r\n        })\r\n            .then(res => res.json())\r\n            .then(data => {\r\n                console.log(data);\r\n                localStorage.clear();\r\n                window.location.replace('http://localhost:8000/login');\r\n            });\r\n    };\r\n\r\n    return (\r\n        <div>\r\n            {loading === false && (\r\n                <Fragment>\r\n                    <h1>Are you sure you want to logout?</h1>\r\n                    <input type='button' value='Logout' onClick={handleLogout} />\r\n                </Fragment>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Logout;"],"mappings":"8JAAA,MAAOA,MAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,CAAqCC,QAArC,KAAqD,OAArD,C,wFAEA,GAAMC,OAAM,CAAG,QAATA,OAAS,EAAM,CACjB,cAA8BH,QAAQ,CAAC,IAAD,CAAtC,wCAAOI,OAAP,eAAgBC,UAAhB,eAEAJ,SAAS,CAAC,UAAM,CACZ,GAAIK,YAAY,CAACC,OAAb,CAAqB,OAArB,GAAiC,IAArC,CAA2C,CACvCC,MAAM,CAACC,QAAP,CAAgBC,OAAhB,CAAwB,6BAAxB,EACH,CAFD,IAEO,CACHL,UAAU,CAAC,KAAD,CAAV,CACH,CACJ,CANQ,CAMN,EANM,CAAT,CAQA,GAAMM,aAAY,CAAG,QAAfA,aAAe,CAAAC,CAAC,CAAI,CACtBA,CAAC,CAACC,cAAF,GAEAC,KAAK,CAAC,iDAAD,CAAoD,CACrDC,MAAM,CAAE,MAD6C,CAErDC,OAAO,CAAE,CACL,eAAgB,kBADX,CAELC,aAAa,iBAAWX,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAX,CAFR,CAF4C,CAApD,CAAL,CAOKW,IAPL,CAOU,SAAAC,GAAG,QAAIA,IAAG,CAACC,IAAJ,EAAJ,EAPb,EAQKF,IARL,CAQU,SAAAG,IAAI,CAAI,CACVC,OAAO,CAACC,GAAR,CAAYF,IAAZ,EACAf,YAAY,CAACkB,KAAb,GACAhB,MAAM,CAACC,QAAP,CAAgBC,OAAhB,CAAwB,6BAAxB,EACH,CAZL,EAaH,CAhBD,CAkBA,mBACI,qBACKN,OAAO,GAAK,KAAZ,eACG,MAAC,QAAD,yBACI,wDADJ,cAEI,cAAO,IAAI,CAAC,QAAZ,CAAqB,KAAK,CAAC,QAA3B,CAAoC,OAAO,CAAEO,YAA7C,EAFJ,GAFR,EADJ,CAUH,CAvCD,CAyCA,cAAeR,OAAf"},"metadata":{},"sourceType":"module"}
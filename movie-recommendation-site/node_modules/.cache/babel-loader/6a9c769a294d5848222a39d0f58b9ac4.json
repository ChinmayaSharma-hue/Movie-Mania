{"ast":null,"code":"\"use strict\";\n\nvar _toConsumableArray = require(\"E:/Web Dev/project/trydjango/src/movie_db_site/movie-recommendation-site/node_modules/@babel/runtime/helpers/toConsumableArray.js\").default;\n\nvar _slicedToArray = require(\"E:/Web Dev/project/trydjango/src/movie_db_site/movie-recommendation-site/node_modules/@babel/runtime/helpers/slicedToArray.js\").default;\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.handleClientScriptLoad = handleClientScriptLoad;\nexports.initScriptLoader = initScriptLoader;\nexports.default = void 0;\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _headManagerContext = require(\"../shared/lib/head-manager-context\");\n\nvar _headManager = require(\"./head-manager\");\n\nvar _requestIdleCallback = require(\"./request-idle-callback\");\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _getRequireWildcardCache() {\n  if (typeof WeakMap !== \"function\") return null;\n  var cache = new WeakMap();\n\n  _getRequireWildcardCache = function _getRequireWildcardCache() {\n    return cache;\n  };\n\n  return cache;\n}\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  }\n\n  if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") {\n    return {\n      default: obj\n    };\n  }\n\n  var cache = _getRequireWildcardCache();\n\n  if (cache && cache.has(obj)) {\n    return cache.get(obj);\n  }\n\n  var newObj = {};\n  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\n\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) {\n      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\n\n      if (desc && (desc.get || desc.set)) {\n        Object.defineProperty(newObj, key, desc);\n      } else {\n        newObj[key] = obj[key];\n      }\n    }\n  }\n\n  newObj.default = obj;\n\n  if (cache) {\n    cache.set(obj, newObj);\n  }\n\n  return newObj;\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nvar ScriptCache = new Map();\nvar LoadCache = new Set();\nvar ignoreProps = ['onLoad', 'dangerouslySetInnerHTML', 'children', 'onError', 'strategy'];\n\nvar loadScript = function loadScript(props) {\n  var src = props.src,\n      id = props.id,\n      _props$onLoad = props.onLoad,\n      onLoad = _props$onLoad === void 0 ? function () {} : _props$onLoad,\n      dangerouslySetInnerHTML = props.dangerouslySetInnerHTML,\n      _props$children = props.children,\n      children = _props$children === void 0 ? '' : _props$children,\n      _props$strategy = props.strategy,\n      strategy = _props$strategy === void 0 ? 'afterInteractive' : _props$strategy,\n      onError = props.onError;\n  var cacheKey = id || src; // Script has already loaded\n\n  if (cacheKey && LoadCache.has(cacheKey)) {\n    return;\n  } // Contents of this script are already loading/loaded\n\n\n  if (ScriptCache.has(src)) {\n    LoadCache.add(cacheKey); // Execute onLoad since the script loading has begun\n\n    ScriptCache.get(src).then(onLoad, onError);\n    return;\n  }\n\n  var el = document.createElement('script');\n  var loadPromise = new Promise(function (resolve, reject) {\n    el.addEventListener('load', function (e) {\n      resolve();\n\n      if (onLoad) {\n        onLoad.call(this, e);\n      }\n    });\n    el.addEventListener('error', function (e) {\n      reject(e);\n    });\n  }).catch(function (e) {\n    if (onError) {\n      onError(e);\n    }\n  });\n\n  if (src) {\n    ScriptCache.set(src, loadPromise);\n  }\n\n  LoadCache.add(cacheKey);\n\n  if (dangerouslySetInnerHTML) {\n    el.innerHTML = dangerouslySetInnerHTML.__html || '';\n  } else if (children) {\n    el.textContent = typeof children === 'string' ? children : Array.isArray(children) ? children.join('') : '';\n  } else if (src) {\n    el.src = src;\n  }\n\n  for (var _i = 0, _Object$entries = Object.entries(props); _i < _Object$entries.length; _i++) {\n    var _Object$entries$_i = _slicedToArray(_Object$entries[_i], 2),\n        k = _Object$entries$_i[0],\n        value = _Object$entries$_i[1];\n\n    if (value === undefined || ignoreProps.includes(k)) {\n      continue;\n    }\n\n    var attr = _headManager.DOMAttributeNames[k] || k.toLowerCase();\n    el.setAttribute(attr, value);\n  }\n\n  if (strategy === 'worker') {\n    el.setAttribute('type', 'text/partytown');\n  }\n\n  el.setAttribute('data-nscript', strategy);\n  document.body.appendChild(el);\n};\n\nfunction handleClientScriptLoad(props) {\n  var _props$strategy2 = props.strategy,\n      strategy = _props$strategy2 === void 0 ? 'afterInteractive' : _props$strategy2;\n\n  if (strategy === 'lazyOnload') {\n    window.addEventListener('load', function () {\n      (0, _requestIdleCallback).requestIdleCallback(function () {\n        return loadScript(props);\n      });\n    });\n  } else {\n    loadScript(props);\n  }\n}\n\nfunction loadLazyScript(props) {\n  if (document.readyState === 'complete') {\n    (0, _requestIdleCallback).requestIdleCallback(function () {\n      return loadScript(props);\n    });\n  } else {\n    window.addEventListener('load', function () {\n      (0, _requestIdleCallback).requestIdleCallback(function () {\n        return loadScript(props);\n      });\n    });\n  }\n}\n\nfunction addBeforeInteractiveToCache() {\n  var scripts = [].concat(_toConsumableArray(document.querySelectorAll('[data-nscript=\"beforeInteractive\"]')), _toConsumableArray(document.querySelectorAll('[data-nscript=\"beforePageRender\"]')));\n  scripts.forEach(function (script) {\n    var cacheKey = script.id || script.getAttribute('src');\n    LoadCache.add(cacheKey);\n  });\n}\n\nfunction initScriptLoader(scriptLoaderItems) {\n  scriptLoaderItems.forEach(handleClientScriptLoad);\n  addBeforeInteractiveToCache();\n}\n\nfunction Script(props) {\n  var _props$src = props.src,\n      src = _props$src === void 0 ? '' : _props$src,\n      _props$onLoad2 = props.onLoad,\n      onLoad = _props$onLoad2 === void 0 ? function () {} : _props$onLoad2,\n      _props$strategy3 = props.strategy,\n      strategy = _props$strategy3 === void 0 ? 'afterInteractive' : _props$strategy3,\n      onError = props.onError,\n      restProps = _objectWithoutPropertiesLoose(props, [\"src\", \"onLoad\", \"strategy\", \"onError\"]); // Context is available only during SSR\n\n\n  var _useContext = (0, _react).useContext(_headManagerContext.HeadManagerContext),\n      updateScripts = _useContext.updateScripts,\n      scripts = _useContext.scripts,\n      getIsSsr = _useContext.getIsSsr;\n\n  (0, _react).useEffect(function () {\n    if (strategy === 'afterInteractive') {\n      loadScript(props);\n    } else if (strategy === 'lazyOnload') {\n      loadLazyScript(props);\n    }\n  }, [props, strategy]);\n\n  if (strategy === 'beforeInteractive' || strategy === 'worker') {\n    if (updateScripts) {\n      scripts[strategy] = (scripts[strategy] || []).concat([_extends({\n        src: src,\n        onLoad: onLoad,\n        onError: onError\n      }, restProps)]);\n      updateScripts(scripts);\n    } else if (getIsSsr && getIsSsr()) {\n      // Script has already loaded during SSR\n      LoadCache.add(restProps.id || src);\n    } else if (getIsSsr && !getIsSsr()) {\n      loadScript(props);\n    }\n  }\n\n  return null;\n}\n\nvar _default = Script;\nexports.default = _default;\n\nif ((typeof exports.default === 'function' || typeof exports.default === 'object' && exports.default !== null) && typeof exports.default.__esModule === 'undefined') {\n  Object.defineProperty(exports.default, '__esModule', {\n    value: true\n  });\n  Object.assign(exports.default, exports);\n  module.exports = exports.default;\n}","map":{"version":3,"mappings":"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","names":["handleClientScriptLoad","initScriptLoader","ScriptCache","Map","LoadCache","Set","ignoreProps","loadScript","props","src","id","onLoad","dangerouslySetInnerHTML","children","strategy","onError","cacheKey","has","add","get","then","el","document","createElement","loadPromise","Promise","resolve","reject","addEventListener","e","call","catch","set","innerHTML","__html","textContent","Array","isArray","join","Object","entries","k","value","undefined","includes","attr","DOMAttributeNames","toLowerCase","setAttribute","body","appendChild","window","requestIdleCallback","loadLazyScript","readyState","addBeforeInteractiveToCache","scripts","querySelectorAll","forEach","script","getAttribute","scriptLoaderItems","Script","restProps","_objectWithoutPropertiesLoose","useContext","HeadManagerContext","updateScripts","getIsSsr","useEffect","concat","_extends"],"sources":["../../client/script.tsx"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}